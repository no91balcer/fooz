(()=>{"use strict";const e=window.wp.i18n;document.addEventListener("DOMContentLoaded",async function(){const t=document.querySelector(".b-book-related .b-book-related__list");if(!t)return;const n=t.closest(".b-book-related").dataset.currentId;try{const o=await fetch("/wp-json/wp/v2/book?per_page=20&exclude="+n+"&_embed");if(!o.ok)throw new Error("Network response was not ok");const c=await o.json();if(t.innerHTML="",!c.length){const n=document.createElement("p");return n.textContent=(0,e.__)("There are no other books","fooz-test"),void t.appendChild(n)}c.forEach(e=>{t.appendChild(function(e){const{link:t="#",title:n={},excerpt:o={},formatted_date:c,_embedded:a}=e,d=n.rendered||"",s=o.rendered||"",r=document.createElement("div");r.className="c-book";const l=document.createElement("a");l.href=t,l.className="c-book__link";const i=document.createElement("div");i.className="c-book__thumb-container",l.appendChild(i);const m=a?.["wp:featuredmedia"]?.[0],p=m?.media_details?.sizes,u=p?.thumbnail?.source_url;if(u){const e=document.createElement("img");if(e.src=u,p){const t=[];Object.keys(p).forEach(function(e){const n=p[e];n.source_url&&n.width&&t.push(n.source_url+" "+n.width+"w")}),e.srcset=t.join(", "),e.sizes="(max-width: 640px) 50vw, (max-width: 1024px) 20vw, 200px"}e.alt=d,e.className="c-book__thumb",e.loading="lazy",i.appendChild(e)}const h=document.createElement("h3");if(h.className="c-book__title",h.textContent=d,l.appendChild(h),c){const e=document.createElement("time");e.className="c-book__date",e.textContent=c,l.appendChild(e)}const _=(a?.["wp:term"]||[]).flat().filter(e=>"genre"===e.taxonomy);if(_.length>0){const e=document.createElement("div");e.className="c-book__genres",_.forEach(t=>{const n=document.createElement("span");n.className="c-book__genre-tag",n.textContent=t.name,e.appendChild(n)}),l.appendChild(e)}const b=document.createElement("div");return b.innerHTML=s,b.className="c-book__excerpt",l.appendChild(b),r.appendChild(l),r}(e))})}catch(n){console.error(n);const o=document.createElement("p");o.textContent=(0,e.__)("Could not load newest books","fooz-test"),t.innerHTML="",t.appendChild(o)}})})();